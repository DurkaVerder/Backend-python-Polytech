# Лабораторная работа 10 - Работа с базой данных SQLite

## Описание

Проект демонстрирует работу с базой данных SQLite с использованием SQLAlchemy и создание веб-приложения на FastAPI для выполнения CRUD-операций.

## Структура проекта

```
lab10/
├── database.py              # Модели данных и настройка базы данных
├── part1_create_tables.py   # Часть 1: Создание таблиц
├── part2_add_data.py        # Часть 2: Добавление данных
├── part2_retrieve_data.py   # Часть 2: Извлечение данных
├── part2_update_data.py     # Часть 2: Обновление данных
├── part2_delete_data.py     # Часть 2: Удаление данных
├── main.py                  # Часть 3: Веб-приложение FastAPI
├── demo.py                  # Демонстрация всех частей
├── templates/               # HTML-шаблоны для веб-приложения
│   ├── base.html
│   ├── index.html
│   ├── users_list.html
│   ├── user_create.html
│   ├── user_edit.html
│   ├── posts_list.html
│   ├── post_create.html
│   └── post_edit.html
└── README.md               # Этот файл
```

## Установка зависимостей

```bash
pip install sqlalchemy fastapi uvicorn jinja2 python-multipart
```

## Запуск

### Демонстрация всех частей задания

```bash
python demo.py
```

### Отдельные части

**Часть 1: Создание таблиц**
```bash
python part1_create_tables.py
```

**Часть 2: Работа с данными**
```bash
python part2_add_data.py
python part2_retrieve_data.py
python part2_update_data.py
python part2_delete_data.py
```

**Часть 3: Веб-приложение**
```bash
python main.py
```

Затем откройте браузер и перейдите на: http://127.0.0.1:8000

## Модель данных

### Таблица Users
- `id` - Целое число, первичный ключ, автоинкремент
- `username` - Строка, уникальное значение
- `email` - Строка, уникальное значение  
- `password` - Строка

### Таблица Posts
- `id` - Целое число, первичный ключ, автоинкремент
- `title` - Строка
- `content` - Текст
- `user_id` - Целое число, внешний ключ на Users.id

## Функциональность веб-приложения

### Пользователи
- Просмотр списка всех пользователей
- Создание нового пользователя
- Редактирование информации о пользователе
- Удаление пользователя (каскадно удаляет все его посты)

### Посты
- Просмотр списка всех постов с информацией об авторах
- Создание нового поста
- Редактирование поста
- Удаление поста

## API Endpoints

- `GET /` - Главная страница
- `GET /users` - Список пользователей
- `GET /users/create` - Форма создания пользователя
- `POST /users/create` - Создание пользователя
- `GET /users/{id}/edit` - Форма редактирования пользователя
- `POST /users/{id}/edit` - Обновление пользователя
- `POST /users/{id}/delete` - Удаление пользователя
- `GET /posts` - Список постов
- `GET /posts/create` - Форма создания поста
- `POST /posts/create` - Создание поста
- `GET /posts/{id}/edit` - Форма редактирования поста
- `POST /posts/{id}/edit` - Обновление поста
- `POST /posts/{id}/delete` - Удаление поста

## Особенности реализации

1. **База данных**: SQLite с файлом `lab10.db`
2. **ORM**: SQLAlchemy 2.0
3. **Веб-фреймворк**: FastAPI
4. **Шаблоны**: Jinja2
5. **Каскадное удаление**: При удалении пользователя автоматически удаляются все его посты
6. **Валидация**: Проверка уникальности username и email
7. **Связи**: Один-ко-многим между Users и Posts