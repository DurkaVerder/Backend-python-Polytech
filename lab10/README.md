# Лабораторная работа 10 - SQLite CRUD приложение# Лабораторная работа 10 - Работа с базой данных SQLite



## Описание## Описание



Проект состоит из 3 Python файлов для работы с базой данных SQLite и веб-интерфейса.Проект демонстрирует работу с базой данных SQLite с использованием SQLAlchemy и создание веб-приложения на FastAPI для выполнения CRUD-операций.



## Структура проекта## Структура проекта



``````

lab10/lab10/

├── database.py     # Модели данных и CRUD операции├── database.py              # Модели данных и настройка базы данных

├── handlers.py     # FastAPI роуты (ручки)├── part1_create_tables.py   # Часть 1: Создание таблиц

├── main.py         # Точка входа приложения├── part2_add_data.py        # Часть 2: Добавление данных

├── templates/      # HTML шаблоны├── part2_retrieve_data.py   # Часть 2: Извлечение данных

└── lab10.db        # База данных SQLite (создается автоматически)├── part2_update_data.py     # Часть 2: Обновление данных

```├── part2_delete_data.py     # Часть 2: Удаление данных

├── main.py                  # Часть 3: Веб-приложение FastAPI

## 3 основных файла├── demo.py                  # Демонстрация всех частей

├── templates/               # HTML-шаблоны для веб-приложения

1. **database.py** - содержит:│   ├── base.html

   - Модели `User` и `Post`│   ├── index.html

   - Настройку SQLAlchemy│   ├── users_list.html

   - Функции для работы с данными (добавление, извлечение, обновление, удаление)│   ├── user_create.html

   - Демонстрацию всех операций│   ├── user_edit.html

│   ├── posts_list.html

2. **handlers.py** - содержит:│   ├── post_create.html

   - FastAPI приложение│   └── post_edit.html

   - Все веб-роуты для Users и Posts└── README.md               # Этот файл

   - CRUD операции через веб-интерфейс```



3. **main.py** - содержит:## Установка зависимостей

   - Точку входа приложения

   - Запуск веб-сервера```bash

pip install sqlalchemy fastapi uvicorn jinja2 python-multipart

## Запуск```



### Демонстрация операций с БД:## Запуск

```bash

python database.py### Демонстрация всех частей задания

```

```bash

### Веб-приложение:python demo.py

```bash```

python main.py

```### Отдельные части

Затем откройте: http://127.0.0.1:8000

**Часть 1: Создание таблиц**

## Возможности```bash

python part1_create_tables.py

- Создание, чтение, обновление, удаление пользователей```

- Создание, чтение, обновление, удаление постов

- Связь постов с пользователями**Часть 2: Работа с данными**

- Веб-интерфейс для всех операций```bash
python part2_add_data.py
python part2_retrieve_data.py
python part2_update_data.py
python part2_delete_data.py
```

**Часть 3: Веб-приложение**
```bash
python main.py
```

Затем откройте браузер и перейдите на: http://127.0.0.1:8000

## Модель данных

### Таблица Users
- `id` - Целое число, первичный ключ, автоинкремент
- `username` - Строка, уникальное значение
- `email` - Строка, уникальное значение  
- `password` - Строка

### Таблица Posts
- `id` - Целое число, первичный ключ, автоинкремент
- `title` - Строка
- `content` - Текст
- `user_id` - Целое число, внешний ключ на Users.id

## Функциональность веб-приложения

### Пользователи
- Просмотр списка всех пользователей
- Создание нового пользователя
- Редактирование информации о пользователе
- Удаление пользователя (каскадно удаляет все его посты)

### Посты
- Просмотр списка всех постов с информацией об авторах
- Создание нового поста
- Редактирование поста
- Удаление поста

## API Endpoints

- `GET /` - Главная страница
- `GET /users` - Список пользователей
- `GET /users/create` - Форма создания пользователя
- `POST /users/create` - Создание пользователя
- `GET /users/{id}/edit` - Форма редактирования пользователя
- `POST /users/{id}/edit` - Обновление пользователя
- `POST /users/{id}/delete` - Удаление пользователя
- `GET /posts` - Список постов
- `GET /posts/create` - Форма создания поста
- `POST /posts/create` - Создание поста
- `GET /posts/{id}/edit` - Форма редактирования поста
- `POST /posts/{id}/edit` - Обновление поста
- `POST /posts/{id}/delete` - Удаление поста

## Особенности реализации

1. **База данных**: SQLite с файлом `lab10.db`
2. **ORM**: SQLAlchemy 2.0
3. **Веб-фреймворк**: FastAPI
4. **Шаблоны**: Jinja2
5. **Каскадное удаление**: При удалении пользователя автоматически удаляются все его посты
6. **Валидация**: Проверка уникальности username и email
7. **Связи**: Один-ко-многим между Users и Posts